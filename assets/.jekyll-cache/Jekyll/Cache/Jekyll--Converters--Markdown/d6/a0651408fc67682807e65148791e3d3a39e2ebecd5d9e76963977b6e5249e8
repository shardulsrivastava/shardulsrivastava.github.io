I"Ü<p>{% assign counter = 0 %}
var documents = [{% for page in site.pages %}{% if page.url contains â€˜.xmlâ€™ or page.url contains â€˜assetsâ€™ or page.url contains â€˜categoryâ€™ or page.url contains â€˜tagâ€™ %}{% else %}{
    â€œidâ€: {{ counter }},
    â€œurlâ€: â€œ{{ site.url }}{{site.baseurl}}{{ page.url }}â€,
    â€œtitleâ€: â€œ{{ page.title }}â€,
    â€œbodyâ€: â€œ{{ page.content | markdownify | replace: â€˜.â€™, â€˜. â€˜ | replace: â€˜&lt;/h2&gt;â€™, â€˜: â€˜ | replace: â€˜&lt;/h3&gt;â€™, â€˜: â€˜ | replace: â€˜&lt;/h4&gt;â€™, â€˜: â€˜ | replace: â€˜&lt;/p&gt;â€™, â€˜ â€˜ | strip_html | strip_newlines | replace: â€˜  â€˜, â€˜ â€˜ | replace: â€˜â€â€™, â€˜ â€˜ }}â€{% assign counter = counter | plus: 1 %}
    }, {% endif %}{% endfor %}{% for page in site.without-plugin %}{
    â€œidâ€: {{ counter }},
    â€œurlâ€: â€œ{{ site.url }}{{site.baseurl}}{{ page.url }}â€,
    â€œtitleâ€: â€œ{{ page.title }}â€,
    â€œbodyâ€: â€œ{{ page.content | markdownify | replace: â€˜.â€™, â€˜. â€˜ | replace: â€˜&lt;/h2&gt;â€™, â€˜: â€˜ | replace: â€˜&lt;/h3&gt;â€™, â€˜: â€˜ | replace: â€˜&lt;/h4&gt;â€™, â€˜: â€˜ | replace: â€˜&lt;/p&gt;â€™, â€˜ â€˜ | strip_html | strip_newlines | replace: â€˜  â€˜, â€˜ â€˜ | replace: â€˜â€â€™, â€˜ â€˜ }}â€{% assign counter = counter | plus: 1 %}
    }, {% endfor %}{% for page in site.posts %}{
    â€œidâ€: {{ counter }},
    â€œurlâ€: â€œ{{ site.url }}{{site.baseurl}}{{ page.url }}â€,
    â€œtitleâ€: â€œ{{ page.title }}â€,
    â€œbodyâ€: â€œ{{ page.date | date: â€œ%Y/%m/%dâ€ }} - {{ page.content | markdownify | replace: â€˜.â€™, â€˜. â€˜ | replace: â€˜&lt;/h2&gt;â€™, â€˜: â€˜ | replace: â€˜&lt;/h3&gt;â€™, â€˜: â€˜ | replace: â€˜&lt;/h4&gt;â€™, â€˜: â€˜ | replace: â€˜&lt;/p&gt;â€™, â€˜ â€˜ | strip_html | strip_newlines | replace: â€˜  â€˜, â€˜ â€˜ | replace: â€˜â€â€™, â€˜ â€˜ }}â€{% assign counter = counter | plus: 1 %}
    }{% if forloop.last %}{% else %}, {% endif %}{% endfor %}];</p>

<p>var idx = lunr(function () {
    this.ref(â€˜idâ€™)
    this.field(â€˜titleâ€™)
    this.field(â€˜bodyâ€™)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>documents.forEach(function (doc) {
    this.add(doc)
}, this) }); function lunr_search(term) {
document.getElementById('lunrsearchresults').innerHTML = '&lt;ul&gt;&lt;/ul&gt;';
if(term) {
    document.getElementById('lunrsearchresults').innerHTML = "&lt;p&gt;Search results for '" + term + "'&lt;/p&gt;" + document.getElementById('lunrsearchresults').innerHTML;
    //put results on the screen.
    var results = idx.search(term);
    if(results.length&gt;0){
        //console.log(idx.search(term));
        //if results
        for (var i = 0; i &lt; results.length; i++) {
            // more statements
            var ref = results[i]['ref'];
            var url = documents[ref]['url'];
            var title = documents[ref]['title'];
            var body = documents[ref]['body'].substring(0,160)+'...';
            document.querySelectorAll('#lunrsearchresults ul')[0].innerHTML = document.querySelectorAll('#lunrsearchresults ul')[0].innerHTML + "&lt;li class='lunrsearchresult'&gt;&lt;a href='" + url + "'&gt;&lt;span class='title'&gt;" + title + "&lt;/span&gt;&lt;br /&gt;&lt;span class='body'&gt;"+ body +"&lt;/span&gt;&lt;br /&gt;&lt;span class='url'&gt;"+ url +"&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;";
        }
    } else {
        document.querySelectorAll('#lunrsearchresults ul')[0].innerHTML = "&lt;li class='lunrsearchresult'&gt;No results found...&lt;/li&gt;";
    }
}
return false; }
</code></pre></div></div>

<p>function lunr_search(term) {
    $(â€˜#lunrsearchresultsâ€™).show( 400 );
    $( â€œbodyâ€ ).addClass( â€œmodal-openâ€ );</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>document.getElementById('lunrsearchresults').innerHTML = '&lt;div id="resultsmodal" class="modal fade show d-block"  tabindex="-1" role="dialog" aria-labelledby="resultsmodal"&gt; &lt;div class="modal-dialog shadow-lg" role="document"&gt; &lt;div class="modal-content"&gt; &lt;div class="modal-header" id="modtit"&gt; &lt;button type="button" class="close" id="btnx" data-dismiss="modal" aria-label="Close"&gt; &amp;times; &lt;/button&gt; &lt;/div&gt; &lt;div class="modal-body"&gt; &lt;ul class="mb-0"&gt; &lt;/ul&gt;    &lt;/div&gt; &lt;div class="modal-footer"&gt;&lt;button id="btnx" type="button" class="btn btn-danger btn-sm" data-dismiss="modal"&gt;Close&lt;/button&gt;&lt;/div&gt;&lt;/div&gt; &lt;/div&gt;&lt;/div&gt;';
if(term) {
    document.getElementById('modtit').innerHTML = "&lt;h5 class='modal-title'&gt;Search results for '" + term + "'&lt;/h5&gt;" + document.getElementById('modtit').innerHTML;
    //put results on the screen.
    var results = idx.search(term);
    if(results.length&gt;0){
        //console.log(idx.search(term));
        //if results
        for (var i = 0; i &lt; results.length; i++) {
            // more statements
            var ref = results[i]['ref'];
            var url = documents[ref]['url'];
            var title = documents[ref]['title'];
            var body = documents[ref]['body'].substring(0,160)+'...';
            document.querySelectorAll('#lunrsearchresults ul')[0].innerHTML = document.querySelectorAll('#lunrsearchresults ul')[0].innerHTML + "&lt;li class='lunrsearchresult'&gt;&lt;a href='" + url + "'&gt;&lt;span class='title'&gt;" + title + "&lt;/span&gt;&lt;br /&gt;&lt;small&gt;&lt;span class='body'&gt;"+ body +"&lt;/span&gt;&lt;br /&gt;&lt;span class='url'&gt;"+ url +"&lt;/span&gt;&lt;/small&gt;&lt;/a&gt;&lt;/li&gt;";
        }
    } else {
        document.querySelectorAll('#lunrsearchresults ul')[0].innerHTML = "&lt;li class='lunrsearchresult'&gt;Sorry, no results found. Close &amp; try a different search!&lt;/li&gt;";
    }
}
return false; }
</code></pre></div></div>

<p>$(function() {
    $(â€œ#lunrsearchresultsâ€).on(â€˜clickâ€™, â€˜#btnxâ€™, function () {
        $(â€˜#lunrsearchresultsâ€™).hide( 5 );
        $( â€œbodyâ€ ).removeClass( â€œmodal-openâ€ );
    });
});</p>
:ET